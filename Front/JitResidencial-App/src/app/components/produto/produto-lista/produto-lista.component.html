<app-titulo [titulo]="'Produto'"
            [iconClass]="'fas fa-shopping-cart'"
            [subtitulo]="'PUC-MINAS EAD 2021'"
            [botaoListar]="true"
            [acao]="'Lista'">
</app-titulo>

<!-- <p>{{produtos | json}}</p> <i class="fa-solid fa-basket-shopping"></i>-->
<div class="container">
  <div class="card-header ">
    <div class="input-group input-group-sm " >
      <div class="input-group-prepend">
        <span class="input-group-text " id="inputGroup-sizing-sm">Filtro:</span>
      </div>
      <input  type="text"
              class="form-control"
              aria-label="Sizing example input"
              aria-describedby="inputGroup-sizing-sm"
              placeholder="buscar por descrição"
              [(ngModel)]="filtroLista">
    </div>
  </div>
  <p> </p>
  <div class="row">
    <div class="col-md-offset-1 col-md-12">
      <div class="panel lg-dark">
        <div class="form-header">
          <div class="how">
            <div class="col-sm-12 col-xs-12 d-flex justify-content-end">
              <button class="d-flex btn btn-dark" routerLink="/produto/detalhe" tooltip="Novo"  >
                <i id="fontMais" class="mt-1 fas fa-plus-circle m-1"></i>
                <b  >Novo</b>
              </button>
            </div>
          </div>
        </div>
        <div class="panel-body table-responsive">
          <table class="table table-striped table-hover">
            <thead>
              <tr>
                <th>#</th>
                <th class="d-none d-md-table-cell">Código de Barras</th>
                <th>Descrição Produto</th>
                <th>Quantidade</th>
                <th class="d-none d-md-table-cell">Volume</th>
                <th class="d-none d-md-table-cell">Data Validade</th>
                <th>Ação</th>
              </tr>
            </thead>
            <tbody *ngIf="produtos && produtos.length">
              <tr *ngFor="let produto of produtosFiltrados" (click)="detalheProduto(produto.id)" style="cursor: pointer">
                <td>{{produto.id}}</td>
                <td class="d-none d-md-table-cell">{{produto.codigoBarras}}</td>
                <td>{{produto.nomeProduto}}</td>
                <td>{{produto.quantidade}}</td>
                <td class="d-none d-md-table-cell">{{produto.volume}}</td>
                <td class="d-none d-md-table-cell" >{{produto.dataValidade | DateTimeFormatPipe}}</td>
                <td>
                  <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                    <button type="button" class="btn btn-danger "  tooltip="Excluir" (click)="openModal($event, template, produto.id)">
                    <i class="fa fa-trash"></i>
                    </button>
                  </div>
                </td>
              </tr>
            </tbody>
            <tfoot *ngIf="!produtos.length">
              <tr>
                <td colspan="8" class="text-center">
                  <h4>Nenhum evento encontrado</h4>
                </td>
              </tr>
            </tfoot>
          </table>
      </div>
      <div class="panel-footer">
        <div class="row">
          <div class="col-sm-6 col-xs-6">
            Exibindo <b>5</b> de <b>25</b> entradas
          </div>
          <div class="col-sm-6 col-xs-6">
            <ul class="pagination hidden-xs pull-right">
              <li><a href="#"><<</a></li>
              <li class="active"><a href="">1</a></li>
              <li><a href="#">2</a> </li>
              <li><a href="#">3</a> </li>
              <li><a href="#">4</a> </li>
              <li><a href="#">5</a> </li>
              <li><a href="#">>></a></li>
            </ul>
            <ul class="pagination visible-xs pull-right">
              <li><a href="#"></a></li>
              <li><a href="#"></a></li>
            </ul>
        </div>
      </div>
    </div>
  </div>
</div>


<ng-template #template>
  <div class="modal-body modal-backdrop-bg text-center">
    <p>Confirma a exclusão do produto {{this.produtoId}} ?</p>
    <button type="button" class="btn btn-default" (click)="confirm()" >Sim</button>
    <button type="button" class="btn btn-primary" (click)="decline()" >Não</button>
  </div>
</ng-template>
